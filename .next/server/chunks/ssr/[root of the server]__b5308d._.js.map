{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/yogendrasankhla/Desktop/abstractsdksl/lib/biconomy.ts"],"sourcesContent":["// lib/biconomy.ts\nimport { privateKeyToAccount } from \"viem/accounts\";\nimport { createSmartAccountClient, toNexusAccount, smartSessionCreateActions } from \"@biconomy/abstractjs\";\nimport { baseSepolia } from \"viem/chains\";\nimport { http } from \"viem\";\n\n// Owner’s private key (for demo purposes, use secure storage in production)\nconst OWNER_PRIVATE_KEY = \"YOUR_OWNER_PRIVATE_KEY\"; // Replace with your private key\nconst ownerAccount = privateKeyToAccount(`0x${OWNER_PRIVATE_KEY}`);\n\n// Biconomy bundler URL (replace with your actual bundler endpoint)\nconst bundlerUrl = \"https://bundler.biconomy.io/api/v3/84532/yourBundlerId\";\n\nexport async function createOwnerNexusClient() {\n  const nexusClient = createSmartAccountClient({\n    account: await toNexusAccount({\n      signer: ownerAccount,\n      chain: baseSepolia,\n      transport: http(),\n    }),\n    transport: http(bundlerUrl),\n  });\n  return nexusClient;\n}\n\n// Install the smart sessions module using the custom session signer (from Silence Labs).\nexport async function installSmartSessionModule(nexusClient: any, sessionSigner:any) {\n  const sessionsModule = (await import(\"@biconomy/abstractjs\")).toSmartSessionsValidator({\n    account: nexusClient.account,\n    signer: sessionSigner, // Swap in our Silence Labs signer here.\n  });\n\n  const hash = await nexusClient.installModule({ module: sessionsModule.moduleInitData });\n  await nexusClient.waitForUserOperationReceipt({ hash });\n  const nexusSessionClient = nexusClient.extend(smartSessionCreateActions(sessionsModule));\n  return { nexusSessionClient, sessionsModule };\n}\n\n// Create a client for using the session (for sending transactions).\nexport async function createSessionUsageClient() {\n  const nexusClient = await createOwnerNexusClient();\n  return nexusClient;\n}\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;AAClB;AACA;AAAA;AACA;AACA;AAFA;;;;;AAIA,4EAA4E;AAC5E,MAAM,oBAAoB,0BAA0B,gCAAgC;AACpF,MAAM,eAAe,CAAA,GAAA,+JAAA,CAAA,sBAAmB,AAAD,EAAE,CAAC,EAAE,EAAE,mBAAmB;AAEjE,mEAAmE;AACnE,MAAM,aAAa;AAEZ,eAAe;IACpB,MAAM,cAAc,CAAA,GAAA,8LAAA,CAAA,2BAAwB,AAAD,EAAE;QAC3C,SAAS,MAAM,CAAA,GAAA,qLAAA,CAAA,iBAAc,AAAD,EAAE;YAC5B,QAAQ;YACR,OAAO,oKAAA,CAAA,cAAW;YAClB,WAAW,CAAA,GAAA,6JAAA,CAAA,OAAI,AAAD;QAChB;QACA,WAAW,CAAA,GAAA,6JAAA,CAAA,OAAI,AAAD,EAAE;IAClB;IACA,OAAO;AACT;AAGO,eAAe,0BAA0B,WAAgB,EAAE,aAAiB;IACjF,MAAM,iBAAiB,CAAC,wJAAoC,EAAE,wBAAwB,CAAC;QACrF,SAAS,YAAY,OAAO;QAC5B,QAAQ;IACV;IAEA,MAAM,OAAO,MAAM,YAAY,aAAa,CAAC;QAAE,QAAQ,eAAe,cAAc;IAAC;IACrF,MAAM,YAAY,2BAA2B,CAAC;QAAE;IAAK;IACrD,MAAM,qBAAqB,YAAY,MAAM,CAAC,CAAA,GAAA,oOAAA,CAAA,4BAAyB,AAAD,EAAE;IACxE,OAAO;QAAE;QAAoB;IAAe;AAC9C;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM;IAC1B,OAAO;AACT"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/yogendrasankhla/Desktop/abstractsdksl/lib/browserWallet.ts"],"sourcesContent":["// lib/browserWallet.ts\nimport { TypedData, IBrowserWallet } from '@silencelaboratories/walletprovider-sdk';\nimport { secp256k1 } from '@noble/curves/secp256k1';\nimport { hashTypedData, hexToBytes, serializeSignature } from 'viem';\nimport { toHex } from 'viem/utils';\nimport { Buffer } from 'buffer';\n\nexport class BrowserWallet implements IBrowserWallet {\n  private privateKey: Uint8Array;\n\n  constructor(privateKeyHex: string) {\n    // Remove the \"0x\" prefix if present and convert to bytes.\n    this.privateKey = Uint8Array.from(Buffer.from(privateKeyHex.replace(/^0x/, ''), 'hex'));\n  }\n\n  async signTypedData<T>(from: string, request: TypedData<T>): Promise<unknown> {\n    const castedRequest = {\n      ...request,\n      message: request.message as Record<string, unknown>,\n    };\n\n    // Create a hash of the typed data.\n    const messageHash = hashTypedData(castedRequest);\n    const messageBytes = hexToBytes(messageHash);\n\n    // Sign the hash.\n    const signature = secp256k1.sign(messageBytes, this.privateKey);\n\n    return serializeSignature({\n      r: toHex(signature.r),\n      s: toHex(signature.s),\n      v: BigInt(signature.recovery) + BigInt(27),\n    });\n  }\n}\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;AAKvB;AAFA;AAAA;AADA;AACA;AACA;;;;;AAGO,MAAM;IACH,WAAuB;IAE/B,YAAY,aAAqB,CAAE;QACjC,0DAA0D;QAC1D,IAAI,CAAC,UAAU,GAAG,WAAW,IAAI,CAAC,qGAAA,CAAA,SAAM,CAAC,IAAI,CAAC,cAAc,OAAO,CAAC,OAAO,KAAK;IAClF;IAEA,MAAM,cAAiB,IAAY,EAAE,OAAqB,EAAoB;QAC5E,MAAM,gBAAgB;YACpB,GAAG,OAAO;YACV,SAAS,QAAQ,OAAO;QAC1B;QAEA,mCAAmC;QACnC,MAAM,cAAc,CAAA,GAAA,mKAAA,CAAA,gBAAa,AAAD,EAAE;QAClC,MAAM,eAAe,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAAE;QAEhC,iBAAiB;QACjB,MAAM,YAAY,qJAAA,CAAA,YAAS,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,UAAU;QAE9D,OAAO,CAAA,GAAA,wKAAA,CAAA,qBAAkB,AAAD,EAAE;YACxB,GAAG,CAAA,GAAA,0JAAA,CAAA,QAAK,AAAD,EAAE,UAAU,CAAC;YACpB,GAAG,CAAA,GAAA,0JAAA,CAAA,QAAK,AAAD,EAAE,UAAU,CAAC;YACpB,GAAG,OAAO,UAAU,QAAQ,IAAI,OAAO;QACzC;IACF;AACF"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/yogendrasankhla/Desktop/abstractsdksl/lib/sl.ts"],"sourcesContent":["// lib/silenceLabs.ts\nimport { v4 as uuidv4 } from \"uuid\";\nimport { \n  WalletProviderServiceClient,\n  EOAAuth,\n  EphKeyClaim,\n  generateEphPrivateKey,\n  getEphPublicKey,\n  NetworkSigner,\n  SignRequestBuilder,\n} from \"@silencelaboratories/walletprovider-sdk\";\nimport { BrowserWallet } from \"./browserWallet\";\n\n// Silence Labs cluster configuration (update if needed)\nconst clusterConfig = {\n  walletProviderId: \"WalletProvider\",\n  walletProviderUrl: \"ws://34.118.117.249\", // Replace with your endpoint\n  apiVersion: \"v1\",\n};\n\nconst THRESHOLD = 2;\nconst PARTIES_NUMBER = 3;\n\nexport async function createSilenceLabsSigner() {\n\n  const demoWalletPrivateKey = \"YOUR_BROWSER_WALLET_PRIVATE_KEY\"; // Replace with a demo key\n  const browserWallet = new BrowserWallet(demoWalletPrivateKey);\n\n  const ownerAddress = \"0xYourOwnerAddress\"; \n\n  // Generate an ephemeral key for signing.\n  const algSign = [\"secp256k1\"];\n  const ephemeralPrivateKey = generateEphPrivateKey(\"ed25519\");\n  const ephemeralPublicKey = getEphPublicKey(ephemeralPrivateKey, \"secp256k1\");\n  const ephId = uuidv4();\n\n  // Create an ephemeral key claim with a 1‑hour lifetime.\n  const ephClaim = new EphKeyClaim(ephId, ephemeralPublicKey, \"secp256k1\", 60 * 60);\n\n  // Create the EOAAuth instance using the BrowserWallet.\n  const eoaAuth = new EOAAuth(ownerAddress, browserWallet, { ephClaim });\n\n  // Create the wallet provider service client.\n  const walletProviderClient = new WalletProviderServiceClient({\n    walletProviderId: \"WalletProvider\",\n    walletProviderUrl: \"ws://34.118.117.249\",\n    apiVersion: \"v1\",\n});\n\n  // Create the NetworkSigner instance.\n  const networkSigner = new NetworkSigner(walletProviderClient, THRESHOLD, PARTIES_NUMBER, eoaAuth);\n  \n  // Perform key generation without any permission arguments.\n  const keygenResponse = await networkSigner.generateKey(algSign);\n  console.log(\"Silence Labs keygen response:\", keygenResponse);\n\n  return networkSigner;\n}\n\n// Sign a message using the Silence Labs signer.\nexport async function signMessageWithSilenceLabs(message : any) {\n  const networkSigner = await createSilenceLabsSigner();\n  const signReq = new SignRequestBuilder()\n    .setRequest(uuidv4(), message, \"rawBytes\")\n    .build();\n\n  const algSign = [\"secp256k1\"];\n  const keygenResponse = await networkSigner.generateKey(algSign);\n  const primaryKey = keygenResponse[0];\n\n  const [signatureResult] = await networkSigner.signMessage(primaryKey.keyId, \"secp256k1\", signReq);\n  return signatureResult.sign;\n}\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;AAErB;AASA;AAVA;;;;AAYA,wDAAwD;AACxD,MAAM,gBAAgB;IACpB,kBAAkB;IAClB,mBAAmB;IACnB,YAAY;AACd;AAEA,MAAM,YAAY;AAClB,MAAM,iBAAiB;AAEhB,eAAe;IAEpB,MAAM,uBAAuB,mCAAmC,0BAA0B;IAC1F,MAAM,gBAAgB,IAAI,oHAAA,CAAA,gBAAa,CAAC;IAExC,MAAM,eAAe;IAErB,yCAAyC;IACzC,MAAM,UAAU;QAAC;KAAY;IAC7B,MAAM,sBAAsB,CAAA,GAAA,sLAAA,CAAA,wBAAqB,AAAD,EAAE;IAClD,MAAM,qBAAqB,CAAA,GAAA,sLAAA,CAAA,kBAAe,AAAD,EAAE,qBAAqB;IAChE,MAAM,QAAQ,CAAA,GAAA,0KAAA,CAAA,KAAM,AAAD;IAEnB,wDAAwD;IACxD,MAAM,WAAW,IAAI,sLAAA,CAAA,cAAW,CAAC,OAAO,oBAAoB,aAAa,KAAK;IAE9E,uDAAuD;IACvD,MAAM,UAAU,IAAI,sLAAA,CAAA,UAAO,CAAC,cAAc,eAAe;QAAE;IAAS;IAEpE,6CAA6C;IAC7C,MAAM,uBAAuB,IAAI,sLAAA,CAAA,8BAA2B,CAAC;QAC3D,kBAAkB;QAClB,mBAAmB;QACnB,YAAY;IAChB;IAEE,qCAAqC;IACrC,MAAM,gBAAgB,IAAI,sLAAA,CAAA,gBAAa,CAAC,sBAAsB,WAAW,gBAAgB;IAEzF,2DAA2D;IAC3D,MAAM,iBAAiB,MAAM,cAAc,WAAW,CAAC;IACvD,QAAQ,GAAG,CAAC,iCAAiC;IAE7C,OAAO;AACT;AAGO,eAAe,2BAA2B,OAAa;IAC5D,MAAM,gBAAgB,MAAM;IAC5B,MAAM,UAAU,IAAI,sLAAA,CAAA,qBAAkB,GACnC,UAAU,CAAC,CAAA,GAAA,0KAAA,CAAA,KAAM,AAAD,KAAK,SAAS,YAC9B,KAAK;IAER,MAAM,UAAU;QAAC;KAAY;IAC7B,MAAM,iBAAiB,MAAM,cAAc,WAAW,CAAC;IACvD,MAAM,aAAa,cAAc,CAAC,EAAE;IAEpC,MAAM,CAAC,gBAAgB,GAAG,MAAM,cAAc,WAAW,CAAC,WAAW,KAAK,EAAE,aAAa;IACzF,OAAO,gBAAgB,IAAI;AAC7B"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Users/yogendrasankhla/Desktop/abstractsdksl/src/app/page.tsx"],"sourcesContent":["// pages/index.tsx\nimport { useState } from \"react\";\nimport { createOwnerNexusClient, installSmartSessionModule, createSessionUsageClient } from \"../../lib/biconomy\";\nimport { createSilenceLabsSigner, signMessageWithSilenceLabs } from \"../../lib/sl\";\nimport { encodeFunctionData } from \"viem\";\nimport IncrementerABI from \"../../contracts/ABI.json\";\n\nexport default function Home() {\n  const [txHash, setTxHash] = useState(null);\n  const [signature, setSignature] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  // Send a transaction using the integrated Biconomy + Silence Labs session.\n  const sendTransaction = async () => {\n    setLoading(true);\n    try {\n      // 1. Create the owner Nexus client.\n      const nexusClient = await createOwnerNexusClient();\n\n      // 2. Create a Silence Labs signer (using our EOAAuth setup).\n      const silenceLabsSigner = await createSilenceLabsSigner();\n\n      // 3. Install the smart sessions module with the Silence Labs signer.\n      const { nexusSessionClient, sessionsModule } = await installSmartSessionModule(nexusClient, silenceLabsSigner);\n\n      // 4. Create a dummy session key (for demo, we generate a random account).\n      const { privateKeyToAccount, generatePrivateKey } = await import(\"viem/accounts\");\n      const sessionOwner = privateKeyToAccount(`0x${generatePrivateKey().slice(2)}`);\n      const sessionPublicKey = sessionOwner.address;\n\n      const sessionRequestedInfo = [\n        {\n          sessionPublicKey,\n          actionPoliciesInfo: [\n            {\n              contractAddress: \"0xd9145CCE52D386f254917e481eB44e9943F39138\", \n              rules: [],\n              functionSelector: \"0x\", \n            },\n          ],\n        },\n      ];\n\n      // 6. Grant session permission.\n      const createSessionsResponse = await nexusSessionClient.grantPermission({\n        sessionRequestedInfo,\n      });\n      await nexusClient.waitForUserOperationReceipt({ hash: createSessionsResponse.userOpHash });\n\n      const sessionData = {\n        granter: nexusClient.account.address,\n        sessionPublicKey,\n        description: `Demo session using Silence Labs signer`,\n        moduleData: {\n          ...createSessionsResponse,\n          mode: \"USE\", // For demonstration\n        },\n      };\n\n      const smartSessionNexusClient = await createSessionUsageClient();\n      // const useSmartSessionNexusClient = smartSessionNexusClient.extend(\n      //   sessionsModule && sessionsModule.moduleInitData ? () => sessionsModule : () => ({})\n      // );\n\n      // 9. Prepare transaction data: call the \"increment\" function.\n      const txData = encodeFunctionData({\n        abi: IncrementerABI,\n        functionName: \"increment\",\n      });\n\n    //   const contractAddress = \"0xd9145CCE52D386f254917e481eB44e9943F39138\"; \n\n    //   const userOpHash = await useSmartSessionNexusClient.usePermission({\n    //     calls: [\n    //         {\n    //             to: contractAddress, // Replace with your target contract address\n    //             data: encodeFunctionData({\n    //                 abi: IncrementerABI,\n    //                 functionName: \"incrementNumber\"\n    //             })\n    //         }\n    //     ]\n    // });\n\n      // setTxHash(userOpHash);\n    } catch (error) {\n      console.error(\"Error sending transaction:\", error);\n    }\n    setLoading(false);\n  };\n\n  const signDemoMessage = async () => {\n    setLoading(true);\n    try {\n      const demoMessage = \"Hello from Silence Labs!\";\n      const sig = await signMessageWithSilenceLabs(demoMessage);\n      setSignature(sig);\n    } catch (error) {\n      console.error(\"Error signing message:\", error);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <h1>Next.js Demo: Biconomy & Silence Labs Integration</h1>\n      <button onClick={sendTransaction} disabled={loading}>\n        {loading ? \"Processing Transaction...\" : \"Send Increment Transaction\"}\n      </button>\n      {txHash && (\n        <p>\n          Transaction submitted! UserOp hash: <code>{txHash}</code>\n        </p>\n      )}\n      <hr />\n      <button onClick={signDemoMessage} disabled={loading}>\n        {loading ? \"Signing...\" : \"Sign Demo Message\"}\n      </button>\n      {signature && (\n        <p>\n          Message Signature: <code>{signature}</code>\n        </p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}